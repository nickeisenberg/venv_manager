#!/usr/bin/env bash


version_is_branch() {
    VERSION=$1

    LOCAL=true
    case "$2" in
        --local)
            LOCAL=true
            ;;
        --remote)
            LOCAL=false
            ;;
        *)
            if [ -n "$2" ]; then
                echo "ERROR get_tag_from_version: invalid input $2"
                return 1
            fi
            ;;
    esac
    
    if $LOCAL; then
        ITERABLE="git branch -a"
        CHECK="remotes/origin/${VERSION}"
    else
        ITERABLE="git ls-remote --heads "${VENVMAN_CPYTHON_REMOTE_URL}""
        CHECK="refs/heads/${VERSION}"
    fi

    for branch in $(eval $ITERABLE); do
        if ! $LOCAL; then
            branch=$(echo $branch | grep "refs/heads/${VERSION}")
        fi

        if [ "$branch" = $CHECK ]; then 
            return 0
        fi

    done
    return 1
}


version_is_branch "$1"
